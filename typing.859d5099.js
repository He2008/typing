parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"QCba":[function(require,module,exports) {
var t="document.ready = function (callback) {\n    if (document.addEventListener) {\n        document.addEventListener('DOMContentLoaded', function () {\n            document.removeEventListener('DOMContentLoaded', arguments.callee, false);\n            callback();\n        }, false)\n    }\n    else if (document.attachEvent) {\n        document.attachEvent('onreadystatechange', function () {\n              if (document.readyState == \"complete\") {\n                        document.detachEvent(\"onreadystatechange\", arguments.callee);\n                        callback();\n               }\n        })\n    }\n    else if (document.lastChild == document.body) {\n        callback();\n    }\n}",e=function(){function t(t,e,n){void 0===e&&(e="default"),this.word=t,this.type=e,this.index=n,this.html=document.createElement("span"),t&&" "!==t?"\r\n"===t||"\n"===t?(this.html=document.createElement("br"),this.word="<br>",console.log("换行")):this.html.innerText=t:(this.word="&nbsp;",this.html.innerHTML="&nbsp"),this.changeType(e)}return t.prototype.changeType=function(t){this.html.appendChild,this.html.className="word "+t},t.prototype.toggleActive=function(){var t=this.html.className.split(" ");t.find(function(t){return"active"===t});var e=t.findIndex(function(t){return"active"===t});-1===e?t.push("active"):t.splice(e,1),this.html.className=t.join(" ")},t}(),n=function(){function t(t){this.words=[],this.index=0,this.oldIndex=NaN,this.el=t}return t.prototype.addWord=function(t,n,i){var o=new e(t,n,i);this.el.appendChild(o.html),this.words.push(o),this.changeIndex(this.index+1,this.index)},t.prototype.deleteWord=function(){if(this.index<=0)return this.changeIndex(0,NaN),!1;this.words[this.words.length-1].html.remove(),this.words.pop(),this.changeIndex(this.index-1,this.index)},t.prototype.changeIndex=function(t,e){this.index=t,this.oldIndex=e},t.prototype.showIndex=function(){this.words[this.oldIndex].toggleActive(),this.words[this.index].toggleActive()},t}(),i=function(){function t(t,e){this.articleWords=[],this.content=e.split(""),this.screen=t,this.init()}return t.prototype.init=function(){this.displayArticle(),this.listenKeyborad(),this.input=new n(document.getElementById("input"))},t.prototype.displayArticle=function(){for(var t=0;t<this.content.length;t++){var n=new e(this.content[t],"default",t);this.articleWords.push(n),this.screen.appendChild(n.html),Window["test"+t]=n}},t.prototype.changeArticleWord=function(t,e){this.articleWords[t].changeType(e)},t.prototype.listenKeyborad=function(){var t=this;window.onkeydown=function(e){var n=e.keyCode,i=e.key,o=t.input.index;if(n>47&&n<59||n>64&&n<91||n>185&&n<223||32===n){if("<br>"===t.articleWords[o].word)return void t.handleBr(o);var d="correct";i!==t.content[o]&&(d="error"),t.changeArticleWord(o,"typed"),t.input.addWord(e.key,d,o)}13===n&&console.log("enter"),8===n&&(console.log("back",o),t.changeArticleWord(o-1,"default"),t.input.deleteWord())}},t.prototype.handleBr=function(t){var e=t;this.input.addWord("\n","typed",t),e++;var n=this.articleWords[e];do{this.input.addWord(" ","typed",t),n=this.articleWords[++e]}while("&nbsp;"===n.word)},t}(),o=function(){return function(){}}();function d(){new i(document.getElementById("article"),t)}function r(){var t=document.getElementById("code");console.log(t.value);var e=t.value;document.getElementById("set").innerHTML=e;new i(document.getElementById("article"),e)}window.onload=function(){d()};
},{}]},{},["QCba"], null)
//# sourceMappingURL=/typing/typing.859d5099.js.map