{"version":3,"sources":["typingEditor/config.ts","typingEditor/utils.ts","typingEditor/view.ts","typingEditor/index.ts"],"names":[],"mappings":";;;;;AAAA,ACAA,IDAM,ACAA,IDAI,CCAC,EDCX,CCDc,mZDAd;AAcA,ACbE,EAAA,EDaI,EAAE,GACR,CCdU,EAAA,QADI,grBDcd;AAsBA,AClCE,EAAA,EDkCI,IAAI,EClCA,CDkCG,CClCH,QAFI,QDoCd;AAGA,ACpCE,EAAA,KDoCF,CAAA,ACpCQ,EAAA,KDoCR,CCvCc,EDuCA;AACd,ACpCE,EDoCF,ACpCE,ODoCK,CCpCG,CDoCF,CCpCE,GDmCI;AAEd,ACzCc,CAAd,CDyCA,IAAI,EAAA,IAFU;AAGd,ACnCA,EDmCA,EAAE,EAAA;AAHY,AGvCd,ADCA,CFsCA,GGvCA,ADCA,OAAA,CCDA,EDCA,CCDA,cDCA,CCDA,ADCA,CCDA,MDCA,CCDA,ADCA,CCDA,QDCA,CAAA,CCDA,ADCA,CCDA,CAAA;;AACA,ADCA,ICDA,ADCA,OCDA,EDCA,CCDA,eAAA,CAAA,OAAA,CAAA,SAAA,CAAA,CAAA;ADCA;ACAA,ADAA,ICAA,MAAA,EDAA,CCAA,OAAA,CAAA,QAAA,CAAA;AAEA,ADGI,WAAA,SAAA,CAAY,IAAZ,EAA0B,IAA1B,EAAyD;ADM7D,ACN8B,QAAA,CDMrB,GCNqB,KDM9B,ACN8B,CDMZ,EAAlB,EAAmC,ACNL,CAAA,EAAA,MDM9B,EAAoD;AAClD,ACP4B,MAAA,GDOrB,CCPqB,GDOjB,ACPiB,MDOrB,CAAW,ECPU,UDOE,SAAZ,GAAwB,SAAnC,EAA8C,IAA9C,CAAmD,EAAE,CAAC,SAAtD,CAAP;AACD,ACR4D;ADS7D;ACXI,SAAA,QAAA,GAAoB,KAApB;ACGJ,ADAM,ICAN,KDAW,CCAX,GDAM,GAAY,IAAZ;ACAN,ADCM,SAAK,IAAL,GAAY,IAAZ;ACDN,ADEM,SAAK,GCFX,CDEM,GAAY,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAZ;ACIJ,ADHI,SAAK,YAAL;AACA,SAAK,UAAL,CAAgB,IAAhB;ADSN,ACRK,SDQI,QAAT,CAAkB,EAAlB,EAAmC,SAAnC,EAAoD;AAClD,MAAI,QAAQ,CAAC,EAAD,EAAK,SAAL,CAAZ,EAA6B,OAAO,KAAP;AAC7B,ACTE,EDSF,ACTE,EDSA,CAAC,MCTD,CAAA,EDSF,IAAgB,GCTd,CAAA,EDSoB,SAAtB,CCTE,GAAA,YAAA;ACKF,AFKD,ACTK,QAAI,GCIR,CDJY,GAAG,ECIf,CAAY,EDJQ,ICIpB,ADJI,ECI4B;AAPhC,ADII,SCJJ,ADIS,IAAL,CCJJ,ADIc,GCJI,CAAC,CAAD,EAAI,CAAJ,CAAlB,ADII,GAAsB,IAAtB;ACIF,AFMJ,ACTK,GAHD,MCMK,AFMA,EENL,GAAU,CFMd,CAAgB,EAAhB,EENoB,AFMa,CENZ,EAAjB,MFMJ,EAAkD;AEL9C,AFMF,MAAI,EENE,IAAI,EFME,CENC,AFMA,EAAD,EAAK,IENI,CAAC,IFMV,CAAZ,EAA6B,MENhB,CAAuB,KAAvB,CAAX;AACA,AFMA,ACVA,EAAA,ECIA,IFMI,GENJ,AFMO,ACVP,CCIA,ADJA,EDUU,IAAI,CENd,CAAM,CDJN,CAAA,EDUU,CAAW,GENrB,CAAe,GDJf,CCIA,EAAqB,ADJrB,EDUiC,QCVtB,CDUU,EENrB,CFM6C,ACV7C,EAA8B,ODUpB,CAAV;AELA,AFMA,ACVI,IDUJ,EAAE,CAAC,CCVI,CCIF,IDJO,GDUZ,CCVO,EDUQ,CENf,CFMiB,CAAC,ACVG,CCIF,IAAI,ADJnB,EAAwB,EDUb,CAAa,CENL,CAAA,IAAJ,CAAS,AFMb,CAAqB,GAArB,EENmB,AFMO,CENN,EFMpB,CAAf,CENmB,EAAsB,SAAtB,CAAnB;AACA,AFMD,ACVG,SCIG,ADJE,IAAL,CAAU,ICIZ,GAAiB,EDJf,ECImB,CDJG,KCIH,CAAA,IAAJ,ADJe,CCIN,GDJF,GCIQ,ADJI,CCIH,EDJT,ECIP,EAAsB,ADJC,KAAK,ECI5B,CAAjB,KDJwC,GAAgB,UAAhB,GAA6B,EAA7C,CAAtB;ACKF,AFMH,ACVI,GAHD,MCOK,QAAL,GAAgB,IAAI,QAAJ,EAAhB;AACA,AFMJ,IENI,IAAI,CAAC,MAAL,CAAY,KAAK,WAAL,CAAiB,IAA7B,EAAmC,KAAK,SAAL,CAAe,IAAlD;AACA,ADLA,EAAA,OCKK,EAAL,ADLA,CCKQ,ADLR,MCKA,CAAe,EDLf,CAAA,ECKoB,QAAL,CAAc,CDL7B,GCKA,ADLA,ECKmC,IAAnC,IDLa,QAAb,EAA8B;ACM9B,ADLE,SCKG,ADLE,QAAL,GAAgB,GCKlB,KDLE;ACMH;AAED,ADPI,QAAI,KAAK,QAAT,EAAmB;AACjB,MAAA,OAAA,CAAA,OAAA,CAAM,QAAN,CAAe,KAAK,IAApB,EAA0B,UAA1B;AACD,KAFD,MAEO;AACL,MAAA,OAAA,CAAA,OAAA,CAAM,MAAN,CAAa,KAAK,IAAlB,EAAwB,UAAxB;ADWR,ACVO,SDUE,QAAT,CAAkB,SAAlB,EAAmC,OAAnC,EAAgD;AEJ9C,AFKA,ACVG,ECKH,CDZE,GDiBE,CAAC,CELL,CAAA,OFKI,EELJ,CAAA,CFKkB,CAAC,OAAnB,EAA4B,GEL5B,GAAA,YAAA;AAAA,AFME,QENF,GFMS,EENT,GAAA,AFME,IENF;AFOC,ACXD,SAAA,SAAA;ACKE,ADjCJ,CAAA,EAAA,CCiCI,MAAM,CAAC,SAAP,GAAmB,UAAC,KAAD,EAAW;AAC5B,AFMJ,MAAI,CAAC,GENG,AFMA,IENI,GAAW,AFMR,CAAC,IENY,CAAC,EFMrB,KENJ,AFMwB,SAAS,CAAC,OAAV,EAA5B;AELI,AFMJ,ACzCW,MDyCP,CAAC,ACzCM,CAAA,ECmCH,AFMA,CAAR,EENW,GAAG,CDnCH,GAAA,CCmCQ,CAAC,GAAhB,IDnCO;ADyCX,MACE,CAAC,GAAG,CADN;AELI,AFKJ,ACXA,IAAA,EDaE,CAAC,CCbH,ECMQ,AFOF,CAFN,QELiB,GAAG,SAAZ,SAAY,GAAA;AAAM,AFK1B,ACXA,MDcE,CAAC,GAAG,CAHN,IEL0B,KAAI,CAAC,KAAL,CAAW,CAAX,CAAA;AAAa,AFKvC,ACXA,MDeE,CETE,KFSI,ACfR,GDeW,GAJX;ACPE,WAAA,IAAA,CAAY,QAAZ,EAAgC,IAAhC,EAAoC;ACGlC,AFSJ,ACbE,MDaE,CAAC,ECbH,CCIM,AFSA,CAAR,EAAW,ICbT,ECIe,CDJS,ECIN,ADJlB,SCIM,SAAY,GAAA;AAAM,AFUxB,ACZE,IDYF,CAAC,GAAG,CAAC,ACZE,GDYC,GEVgB,CFUpB,CCZF,CAAc,CDYD,CEVa,CAAC,AFUzB,GAAgB,EEVI,ADFtB,CCEiC,CAAX,AFUxB,ACZ0B,CCEF,GDFtB;ACEmC,AFWrC,ACZC,IDYD,CAAC,EEXC,CFWE,IAAI,CAAC,KAAL,CAAY,CAAC,GAAG,IAAJ,GAAW,EAAX,GAAgB,EAAjB,GAAuB,EAAlC,CAAJ;AACA,IAAA,CAAC,GAAG,IAAI,CAAC,KAAL,CAAY,CAAC,GAAG,IAAJ,GAAW,EAAZ,GAAkB,EAA7B,CAAJ;AEXE,AFYF,ACbA,EAAA,EDaA,CAAC,CCbD,CAAA,CDaI,EEZE,EFYE,CAAC,GCbT,CAAA,CDaI,CAAY,CEZA,AFYC,GEZE,AFYC,ECbpB,EDae,CCbf,EDa4B,EEZtB,AFYF,CAAJ,KCbS,ICCU,ADDnB,EAAyB,CCCN,GDDnB,EAAqC;ACEjC,AFYJ,ACdA,IDcA,ICdA,EDcM,GAAM,ACdZ,CDca,CEZT,CDFJ,CDca,GEZL,ADFR,CCES,IFYG,GAAK,CAAL,CEZR,CAAe,CFYD,OEZd,CAAwB,AFY5B,SEZqC,EAAjC,EAAqC,QAArC,CAA8C,SAAS,EAAvD,CAAA;AAA0D,AFa/D,OEdG;ADAA,SAAK,IAAL,GAAY,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAZ;ACEA,AFaJ,ACdI,IAAA,KDcG,CEbC,CDDJ,CAAA,OAAA,CAAM,ECCU,GAAG,GDDnB,CAAe,KCCX,ADDgB,IAApB,EAA0B,MCCP,ADDnB,GCCmB;AACjB,AFYE,ACbJ,IDaI,ACbJ,CDaK,EAAA,CAAF,ACbC,CAAC,MCCH,CDDF,CAAa,GCCP,CAAC,MDDM,IAAA,CCCX,CAAiB,ADDF,QCCf,CAA0B,SAAS,EAAnC,EAAuC,QAAvC,CAAgD,SAAS,EAAzD,CAAA;AAA4D,AFYxD,ACZJ,IDYI,CAAC,EEbP,AFaO,CEpBqB,AFoBzB,CEXH,CDDM,SAAS,GACX,IAAI,KAAK,OAAT,GAAmB,aAAnB,GAAmC,SADrC;ADYM,IAAA,CAAC,EAAA,CAAN;AAAO,ACVR,IDUQ,CAAC,EAAA,CAAR,ECVG,IAAI,KAAK,QAAb,EAAuB;ACAzB,AFUY,ACTR,IDSQ,ICTR,ECAD,AFSe,EAAA,EETX,GAAG,ADAG,ECAV,CDAa,GCAA,IAAI,CDAhB,ECAmB,EAArB,IACC,IAAI,GAAG,EAAP,IAAa,IAAI,GAAG,EADrB,IAEC,IAAI,GAAG,GAAP,IAAc,IAAI,GAAG,GAFtB,IAGA,IAAI,KAAK,EAJX,EAKE;AACA,AFIC,ACRC,GDQR,KCRQ,ICIE,ADJE,GAAG,CCID,GAAkB,GDJxB,MCIF;AFKP,ACRQ,OAHD,MAGM,IAAG,IAAI,KAAI,KAAX,EAAiB;ACIvB,ADHE,QAAA,ICGE,GAAG,EDHI,GCGC,ADHE,GCGd,EAAiB,ADHf;ACIA,AFKV,ACRU,ODQV,CAAA,ACRU,ECGA,EDHI,CCGD,EFKb,ACRiB,CCGD,EFKD,ICRL,CDQV,CELU;AFMV,ACRS,MDQH,CAAC,KAAP,GAAe,KAAf;AELU,cAAI,KAAK,CAAC,cAAV,EAA0B;AACxB,ADHJ,UAAI,ECGA,KAAK,CAAC,CDHG,GAAG,IAAI,MCGhB,GDHY,CAAc,IAAd,EAAoB,SAApB,CAAhB;ACIG,WAFD,MAEO;AACL,ADJJ,MAAA,KAAI,CCIA,ADJC,MCIK,CAAC,CDJX,CAAc,GCIV,CAAa,ADJjB,CAAmB,SAAnB,CCII,GAA2B,KAA3B;AACD;AACF,ADLD,MAAA,KAAI,CAAC,IAAL,CAAU,MAAV,CAAiB,SAAS,CAAC,IAA3B;AACD,KAbD;ACkBE,ADJH,GAjBD,SCqBQ,GAAG,KAAK,YAAY,GAAG,IAA3B,EAAiC;AAC/B,UAAA,IAAI,GAAG,OAAP;ADJR,SAAA,IAAA;ACKQ,AD9BR,CAAA,EAAA,OC8BQ,KAAI,CAAC,QAAL,CAAc,UAAd;AACD;AD/BO,OAAA,CAAA,IAAA,GAAA,IAAA;ACgCR,YAAI,YAAY,GAAG,IAAf,KAAwB,KAA5B,EAAmC;AACjC,ADNR,IAAA,IAAA,ECMQ,KAAI,CAAC,QAAL,CAAc,QAAd;AACD,ADPP;AAAA,YAAA;ACQM,ADHJ,QCGI,GDHJ,IAAA,CAAY,ICGI,ADHhB,EAA0B,CCGP,GDHnB,EAAsC,KCGlC,CAA0B,aAA1B;AACA,ADNJ,QCMI,CDNJ,QAAA,CCMc,EDNK,CCMF,CDNjB,SCMI,CAAwB,IAAxB;ADHF,SAAK,IAAL,GAAY,IAAZ;ACIE,ADHF,QCGE,CDHG,ICGC,ADHN,CCGO,EDHK,OCGV,CAAe,ADHG,CAAC,QCGnB,EAnBA,CAqBA,EDLU,CAAuB,KAAvB,CAAZ;AACA,IAAA,OAAA,CAAA,OAAA,CAAM,QAAN,CAAe,KAAK,IAApB,EAA0B,IAA1B;AACA,SAAK,UAAL,CAAgB,IAAhB;ACIE,ADHH,QCGG,KAAI,CAAC,QAAL,CAAc,QAAd,GAtBA,CAuBA;;AACD,ADJH,EAAA,IAAA,CCnC8B,ADmC9B,CCKE,QDLF,CAAA,UAAA,GAAA,UAAW,IAAX,EAAe;AACb,QAAI,IAAI,GAAG,KAAK,IAAhB;AACA,QAAI,IAAI,GAAG,EAAX;ACIA,ADHA,QAAI,ECGA,EDHJ,ECGQ,KAAK,EAAb,EAAiB,CAChB,CA1C2B,CA2C5B;ADJA,QAAI,MAAM,GAAG,IAAb;;ACKA,ADJA,SAAK,CCID,GDJK,CCID,ADJE,GAAG,CAAb,CCIa,CAAb,ADJgB,CAAC,CCID,EDJI,IAAI,CAAC,MAAzB,EAAiC,CAAC,EAAlC,EAAsC;ACKpC,ADJA,MAAA,ECIA,EDJI,GCIA,ADJG,CCIF,GDJM,CAAC,CAAD,CAAX,GCIA,CAAe,MAAf;;AACA,ADJA,QCIA,EDJI,CAAC,IAAD,IAAS,CCID,GAAG,ADJE,KAAK,GAAtB,ECIA,ADJ2B,CCID,SAA1B;AACA,ADJE,QCIF,ADJE,IAAI,GAAG,GCIC,GAAG,ADJE,GAAG,OCIlB,CAAwB,ADJT,GAAc,QAA3B,ECIF;AACD,ADJE,OAFD,MAEO,IAAI,IAAI,KAAK,MAAT,IAAmB,IAAI,KAAK,IAAhC,EAAsC;ACKhD,ADJK,KC7CN,OD6CU,WAAS,GAAG,IAAI,IAAJ,CAAS,IAAT,EAAe,IAAf,CAAhB;ACKP,ADJO,GC/CR,UD+Ca,QAAL,CAAc,IAAd,CAAmB,WAAnB;ACKR,ADJQ,aAAK,IAAL,CAAU,MAAV,CAAiB,WAAS,CAAC,IAA3B;AACA,QAAA,IAAI,GAAG,EAAP;AACA,QAAA,MAAM,GAAG,IAAT;AACA;AACD,OAPM,MAOA;AACL,QAAA,MAAM,GAAG,KAAT;ACGR,ADFO,ECEP,MAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,IAAV,EAAsB;AAAtB,QAAA,KAAA,GAAA,IAAA;ADDM,MAAA,IAAI,CAAC,IAAL,CAAU,IAAV;ACEJ,ADDG,QCCC,SAAS,GAAG,KAAK,KAAL,CAAW,CAAX,CAAhB;AACA,QAAI,SAAS,GAAG,KAAK,KAAL,CAAW,CAAX,CAAhB;ADDE,IAAA,IAAI,CAAC,IAAL,CAAU,KAAV;ACEF,ADDE,QCCE,ADDE,ICCE,GAAG,EDDI,GAAG,ICCd,ADDkB,ICCX,ADDO,CAAS,ECChB,EDDO,EAAe,IAAf,CAAhB;ACEA,ADDA,SAAK,ICCE,IDDP,CCCW,ADDG,CCCF,GDDZ,CAAmB,OCCZ,CAAiB,CDDxB,OCCO,CAA0B,KAAI,CAAC,KAAL,CAAW,CAAX,CAA1B,CAAP;AACD,ADDC,KCDF,IDCO,IAAL,CAAU,MAAV,CAAiB,SAAS,CAAC,IAA3B;AACD,GAzBD;AC0BA,QAAI,IAAI,GAAG,SAAP,IAAO,GAAA;AACT,ADDJ,SAAA,ICCW,ADDX,ICCe,GAAG,QAAP,CAAgB,KAAI,CAAC,KAAL,CAAW,CAAX,CAAhB,CAAP;AACD,ADvCH,CAAA,EAAA,ECqCE;;AAGA,ADxCa,ICwCb,GDxCa,CCwCT,ADxCS,GCwCN,CDxCM,GAAA,IAAA,ICwCb,CAAoB,KAApB;;AAEA,QAAI,IAAI,KAAK,SAAb,EAAwB;AACtB,UAAI,QAAQ,CAAC,KAAK,WAAN,CAAZ,EAAgC;;AAChC,UAAI,SAAS,IAAI,IAAI,GAAG,QAAP,CAAgB,MAAhB,GAAyB,CAA1C,EAA6C;AAC3C,aAAK,KAAL,CAAW,CAAX,IAAgB,CAAhB;AACA,aAAK,KAAL,CAAW,CAAX;AACD,OAHD,MAGO;AACL,aAAK,KAAL,CAAW,CAAX;AACD;AACF,KARD,MAQO,IAAI,IAAI,KAAK,MAAb,EAAqB;AAC1B,UAAI,UAAU,CAAC,KAAK,WAAN,CAAd,EAAkC;;AAClC,UAAI,SAAS,GAAG,CAAZ,IAAiB,IAAI,GAAG,IAAP,KAAgB,QAArC,EAA+C;AAC7C,aAAK,KAAL,CAAW,CAAX;AACD,OAFD,MAEO;AACL,aAAK,KAAL,CAAW,CAAX;AACA,aAAK,KAAL,CAAW,CAAX,IAAgB,IAAI,GAAG,QAAP,CAAgB,MAAhB,GAAyB,CAAzC;AACD;AACF;;AACD,IAAA,IAAI,GAAG,YAAP,CAAoB,IAApB;AACA,QAAI,IAAI,GAAG,IAAP,KAAgB,QAApB,EAA8B,KAAK,SAAL,CAAe,IAAf;;AAE9B,aAAS,QAAT,CAAkB,IAAlB,EAA4B;AAC1B,aACE,SAAS,KAAK,IAAI,CAAC,QAAL,CAAc,MAAd,GAAuB,CAArC,IACA,IAAI,GAAG,QAAP,CAAgB,MAAhB,GAAyB,CAAzB,KAA+B,SAFjC;AAID;;AACD,aAAS,UAAT,CAAoB,IAApB,EAA8B;AAC5B,aAAO,SAAS,KAAK,CAAd,IAAmB,SAAS,KAAK,CAAxC;AACD;AACF,GAxCD;;AAyCF,SAAA,MAAA;AA3HA,CAAA,EAAA;;AA6HA,IAAA,QAAA;AAAA;AAAA,YAAA;AAQE,WAAA,QAAA,GAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AALA,SAAA,QAAA,GAAmB,CAAnB;AACA,SAAA,QAAA,GAAmB,CAAnB;AAEA,SAAA,KAAA,GAAiB,KAAjB;AAGE,SAAK,IAAL,GAAY,IAAI,IAAJ,EAAZ;AACA,SAAK,IAAL,GAAY,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;AACA,IAAA,OAAA,CAAA,OAAA,CAAM,QAAN,CAAe,KAAK,IAApB,EAA0B,UAA1B;AACA,SAAK,KAAL,GAAa,WAAW,CAAC,YAAA;AACvB,UAAI,KAAI,CAAC,KAAT,EAAgB;AACd,QAAA,aAAa,CAAC,KAAI,CAAC,KAAN,CAAb;AACD;;AACD,MAAA,KAAI,CAAC,UAAL;AACD,KALuB,EAKrB,IALqB,CAAxB;AAMD;;AACD,EAAA,QAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACE,QAAI,KAAK,KAAT,EAAgB;;AAChB,QAAI,KAAK,QAAL,KAAkB,CAAtB,EAAyB;AACvB,WAAK,IAAL,CAAU,QAAV;AACD;;AACD,SAAK,QAAL;AACA,SAAK,UAAL;AACD,GAPD;;AAQA,EAAA,QAAA,CAAA,SAAA,CAAA,UAAA,GAAA,YAAA;AACE,QAAI,KAAK,KAAT,EAAgB;AAChB,SAAK,QAAL;AACD,GAHD;;AAIA,EAAA,QAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACE,QAAI,KAAK,KAAT,EAAgB;AAChB,SAAK,KAAL,GAAa,IAAb;AACA,SAAK,IAAL,CAAU,MAAV;AACD,GAJD;;AAKA,EAAA,QAAA,CAAA,SAAA,CAAA,UAAA,GAAA,YAAA;AACE,SAAK,MAAL,GAAc;AACZ,MAAA,SAAS,EAAE,KAAK,IAAL,CAAU,KADT;AAEZ,MAAA,UAAU,EAAE,KAAK,QAFL;AAGZ,MAAA,KAAK,EAAE,KAAK,QAHA;AAIZ,MAAA,WAAW,EAAE,KAAK,QAAL,GAAgB,KAAK;AAJtB,KAAd;AAMD,GAPD;;AAQA,EAAA,QAAA,CAAA,SAAA,CAAA,UAAA,GAAA,YAAA;AACE,SAAK,IAAL,CAAU,cAAV;AACA,SAAK,UAAL;AACA,QAAI,CAAC,GAAG,KAAK,MAAb;AACA,QAAI,IAAI,GAAG,yBAAY,CAAC,CAAC,SAAF,CAAY,MAAZ,IAAsB,GAAlC,IAAqC,kCAArC,GACT,CAAC,CAAC,UADO,GACG,4BADH,GAEQ,CAAC,CAAC,KAFV,GAEe,kCAFf,GAEmC,IAAI,CAAC,IAAL,CAC5C,CAAC,CAAC,WAAF,GAAgB,GAD4B,CAFnC,GAIV,SAJD;AAKA,SAAK,IAAL,CAAU,SAAV,GAAsB,IAAtB;AACD,GAVD;;AAWF,SAAA,QAAA;AAvDA,CAAA,EAAA;;AAyDA,IAAA,IAAA;AAAA;AAAA,YAAA;AAKE,WAAA,IAAA,GAAA,CAAgB;;AAChB,EAAA,IAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACE,SAAK,KAAL,GAAa,IAAI,IAAJ,EAAb;AACD,GAFD;;AAGA,EAAA,IAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACE,SAAK,GAAL,GAAW,IAAI,IAAJ,EAAX;AACA,SAAK,cAAL;AACD,GAHD;;AAIA,EAAA,IAAA,CAAA,SAAA,CAAA,cAAA,GAAA,YAAA;AACE,QAAI,GAAG,GAAG,IAAI,IAAJ,EAAV;;AACA,QAAI,KAAK,GAAT,EAAc;AACZ,MAAA,GAAG,GAAG,KAAK,GAAX;AACD;;AACD,SAAK,KAAL,GAAa,OAAA,CAAA,OAAA,CAAM,QAAN,CAAe,KAAK,KAApB,EAA2B,GAA3B,CAAb;AACD,GAND;;AAOF,SAAA,IAAA;AApBA,CAAA,EAAA,EAsBA;;;AACA,SAAS,QAAT,GAAiB;AACf,MAAI,MAAM,GAAiB;AACzB,IAAA,EAAE,EAAE,QAAQ,CAAC,cAAT,CAAwB,QAAxB,CADqB;AAEzB,IAAA,IAAI,EAAE,QAAA,CAAA,OAAA,CAAE,OAAF,CAAU,IAAV;AAFmB,GAA3B;AAIA,MAAI,MAAM,GAAG,IAAI,MAAJ,CAAW,MAAX,CAAb;AACD;;AAED,MAAM,CAAC,MAAP,GAAgB,YAAA;AACd,EAAA,QAAQ;AACT,CAFD","file":"typingEditor.66f7f39c.js","sourceRoot":"../src","sourcesContent":["const java = \n`\npublic class StringCompareEmp{\n    public static void main(String args[]){\n       String str = \"Hello World\";\n       String anotherString = \"hello world\";\n       Object objStr = str;\n  \n       System.out.println( str.compareTo(anotherString) );\n       System.out.println( str.compareToIgnoreCase(anotherString) );\n       System.out.println( str.compareTo(objStr.toString()));\n    }\n }\n`\nconst js = \n`\ndocument.ready = function (callback) {\n    if (document.addEventListener) {\n        document.addEventListener('DOMContentLoaded', function () {\n            document.removeEventListener('DOMContentLoaded', arguments.callee, false);\n            callback();\n        }, false)\n    }\n    else if (document.attachEvent) {\n        document.attachEvent('onreadystatechange', function () {\n              if (document.readyState == \"complete\") {\n                        document.detachEvent(\"onreadystatechange\", arguments.callee);\n                        callback();\n               }\n        })\n    }\n    else if (document.lastChild == document.body) {\n        callback();\n    }\n}\n`\nconst line = `this is a line!`\n\n\nexport default{\ncontent:java,\njava,\njs\n\n}\n","const utils = {\n  hasClass,\n  addClass,\n  remove,\n  timeLeft\n};\n\n/**\n *@desc 判断是否有某个Class\n *@param {HTMLElement} el 元素\n *@param {string} className 类名\n *@return {boolean}\n */\nfunction hasClass(el: HTMLElement, className: string): boolean {\n  return new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\").test(el.className);\n}\n/**\n * @desc 添加Class\n * @param el 元素\n * @param className 类名\n */\nfunction addClass(el: HTMLElement, className: string) {\n  if (hasClass(el, className)) return false;\n  el.className += \" \" + className;\n}\n\nfunction remove(el: HTMLElement, className: string) {\n  if (hasClass(el, className)) {\n    let reg = new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\");\n    el.className = el.className.replace(reg, \" \");\n  }\n}\n/**\n * @desc startTime - endTime 剩余时间\n * @param   startTime\n * @param   endTime\n * @return Object {d,h,m,s} 天时分秒\n */\nfunction timeLeft(startTime: Date, endTime: Date): any {\n  if (!startTime || !endTime) {\n    return false;\n  }\n  let t = endTime.getTime() - startTime.getTime();\n  let d = 0,\n    h = 0,\n    m = 0,\n    s = 0,\n    format = '0';\n  if (t > 0) {\n    d = t / 3600 / 24 / 1000;\n    h = Math.floor((t / 1000 / 60 / 60) % 24);\n    m = Math.floor((t / 1000 / 60) % 60);\n    s = Math.floor((t / 1000) % 60);\n    format = `${m}分${s}秒`\n  }\n  return {d,h,m,s,format}\n}\n\nexport default utils;\nwindow.utils = utils;\n","\nimport Utils from './utils'\nexport class CharBlock {\n    char: string;\n    type: CharBlockType;\n    isActive: boolean = false;\n    html: HTMLElement;\n    constructor(char: string, type: CharBlockType = \"default\") {\n      this.char = char;\n      this.type = type;\n      this.html = document.createElement(\"span\");\n      this.initCharHtml();\n      this.changeType(type);\n    }\n    initCharHtml() {\n      let char = this.char;\n      this.html.innerHTML = char;\n    }\n    changeType(type: CharBlockType) {\n        if(this.type === 'end') return\n      this.html.className = `char ${type} ${this.isActive ? \"isActive\" : \"\"}`;\n    }\n    toggleActive(isActive: boolean) {\n      this.isActive = isActive;\n      if (this.isActive) {\n        Utils.addClass(this.html, \"isActive\");\n      } else {\n        Utils.remove(this.html, \"isActive\");\n      }\n    }\n  }\n  \n  export  class Line {\n    html: HTMLElement;\n    lineNo: number;\n    charList: CharBlock[] = [];\n    constructor(lineText: string[], type) {\n      this.initLine(lineText, type);\n    }\n    initLine(text: string[], type: String) {\n      this.html = document.createElement(\"p\");\n      Utils.addClass(this.html, \"line\");\n      text.forEach(char => {\n        let blockType: CharBlockType =\n          type === \"input\" ? \"transparent\" : \"default\";\n        if (char === \"indent\") {\n          blockType = \"indent\";\n          char = \"&nbsp\";\n        }else if(char ==='end'){\n          blockType = \"end\";\n          char = \"&nbsp\";\n        }\n        let charBlock = new CharBlock(char, blockType);\n        this.charList.push(charBlock);\n        this.html.append(charBlock.html);\n      });\n    }\n  }\n  \n  export   class View {\n    html: HTMLElement;\n    text: string;\n    lineList: Line[] = [];\n  \n    constructor(text: string, type: string) {\n      this.text = text;\n      this.html = document.createElement(\"div\");\n      Utils.addClass(this.html, type);\n      this.handleText(type);\n    }\n    handleText(type) {\n      let text = this.text;\n      let line = [];\n      let char: string;\n      let indent = true;\n      for (let i = 0; i < text.length; i++) {\n        char = text[i];\n        if (!char || char === \" \") {\n          char = indent ? \"indent\" : \"&nbsp;\";\n        } else if (char === \"\\r\\n\" || char === \"\\n\") {\n          let lineClass = new Line(line, type);\n          this.lineList.push(lineClass);\n          this.html.append(lineClass.html);\n          line = [];\n          indent = true;\n          continue;\n        } else {\n          indent = false;\n        }\n        line.push(char);\n      }\n      line.push('end')\n      let lineClass = new Line(line, type);\n      this.lineList.push(lineClass);\n      this.html.append(lineClass.html);\n    }\n  }\n  ","import C from \"./config\";\nimport Utils from \"./utils\";\nimport { View } from \"./view\";\n\n/**\n * @desc Typing 类\n * @\n */\nclass Typing {\n  el: HTMLElement;\n  displayView: View;\n  inputView: View;\n  index: number[] = [0, 0];\n  analysis: Analysis;\n  /**\n   * 创建Typing实例\n   * @param config.text 文章内容\n   * @param config.el 挂载的htmlElement\n   */\n  constructor(config: TypingConfig) {\n    this.el = config.el;\n    let wrap = document.createElement(\"div\");\n    Utils.addClass(wrap, \"screen-warp\");\n    this.displayView = new View(config.text, \"display\");\n    this.inputView = new View(config.text, \"input\");\n    this.analysis = new Analysis();\n    wrap.append(this.displayView.html, this.inputView.html);\n    this.el.append(this.analysis.html, wrap);\n    this.handleKeyEvent();\n  }\n\n  /**\n   * 监听键盘输入\n   */\n  handleKeyEvent() {\n    window.onkeydown = (event: any) => {\n      let code: Number = event.keyCode;\n      let key = event.key;\n      let lineIndex = () => this.index[1];\n      let charIndex = () => this.index[0];\n      let inputBlock = () =>\n        this.inputView.lineList[lineIndex()].charList[charIndex()];\n      let displayBlock = () =>\n        this.displayView.lineList[lineIndex()].charList[charIndex()];\n      // input text\n      if (\n        (code > 47 && code < 59) ||\n        (code > 64 && code < 91) ||\n        (code > 185 && code < 223) ||\n        code === 32\n      ) {\n        let type: wordBlockType = \"correct\";\n        if (key === \" \") {\n          key = \"&nbsp;\";\n          if (event.preventDefault) {\n            event.preventDefault();\n          } else {\n            window.event.returnValue = false;\n          }\n        }\n        if (key !== displayBlock().char) {\n          type = \"error\";\n          this.analysis.errorInput();\n        }\n        if (displayBlock().type === \"end\") {\n          this.analysis.endInput();\n        }\n        displayBlock().changeType(\"transparent\");\n        inputBlock().changeType(type);\n        this.moveIndex(\"forward\");\n\n        // 计数\n        this.analysis.addInput();\n        // 阻止浏览器默认\n      }\n      // ENTER\n      if (code === 13) {\n      }\n      // back\n      if (code === 8) {\n        this.moveIndex(\"back\");\n        displayBlock().changeType(\"default\");\n        inputBlock().changeType(\"transparent\");\n      }\n    };\n  }\n  /**\n   * 移动光标\n   * @param type 移动方向\n   */\n  moveIndex(type: string) {\n    let lineIndex = this.index[1];\n    let charIndex = this.index[0];\n    let line = () => {\n      return this.displayView.lineList[this.index[1]];\n    };\n    let char = () => {\n      return line().charList[this.index[0]];\n    };\n    char().toggleActive(false);\n\n    if (type === \"forward\") {\n      if (checkEnd(this.displayView)) return;\n      if (charIndex >= line().charList.length - 1) {\n        this.index[0] = 0;\n        this.index[1]++;\n      } else {\n        this.index[0]++;\n      }\n    } else if (type === \"back\") {\n      if (checkStart(this.displayView)) return;\n      if (charIndex > 0 && char().type !== \"indent\") {\n        this.index[0]--;\n      } else {\n        this.index[1]--;\n        this.index[0] = line().charList.length - 1;\n      }\n    }\n    char().toggleActive(true);\n    if (char().type === \"indent\") this.moveIndex(type);\n\n    function checkEnd(view: View) {\n      return (\n        lineIndex === view.lineList.length - 1 &&\n        line().charList.length - 1 === charIndex\n      );\n    }\n    function checkStart(view: View) {\n      return lineIndex === 0 && charIndex === 0;\n    }\n  }\n}\n\nclass Analysis {\n  html: HTMLElement;\n  time: Time;\n  inputNum: number = 0;\n  errorNum: number = 0;\n  result: any;\n  isEnd: boolean = false;\n  timer: number;\n  constructor() {\n    this.time = new Time();\n    this.html = document.createElement(\"div\");\n    Utils.addClass(this.html, \"analysis\");\n    this.timer = setInterval(() => {\n      if (this.isEnd) {\n        clearInterval(this.timer);\n      }\n      this.appendHtml();\n    }, 1000);\n  }\n  addInput() {\n    if (this.isEnd) return;\n    if (this.inputNum === 0) {\n      this.time.setStart();\n    }\n    this.inputNum++;\n    this.handleData();\n  }\n  errorInput() {\n    if (this.isEnd) return;\n    this.errorNum++;\n  }\n  endInput() {\n    if (this.isEnd) return;\n    this.isEnd = true;\n    this.time.setEnd();\n  }\n  handleData() {\n    this.result = {\n      totalTime: this.time.total,\n      totalInput: this.inputNum,\n      error: this.errorNum,\n      correctRate: this.errorNum / this.inputNum\n    };\n  }\n  appendHtml() {\n    this.time.handleCostTime();\n    this.handleData();\n    let r = this.result;\n    let html = `<span>用时:${r.totalTime.format || \"0\"}</span><span>总输入:${\n      r.totalInput\n    }</span><span>错误:${r.error}</span><span>正确率:${Math.ceil(\n      r.correctRate * 100\n    )}</span>`;\n    this.html.innerHTML = html;\n  }\n}\n\nclass Time {\n  start: Date;\n  end: Date;\n  total: string;\n  timer: number;\n  constructor() {}\n  setStart() {\n    this.start = new Date();\n  }\n  setEnd() {\n    this.end = new Date();\n    this.handleCostTime();\n  }\n  handleCostTime() {\n    let end = new Date();\n    if (this.end) {\n      end = this.end;\n    }\n    this.total = Utils.timeLeft(this.start, end);\n  }\n}\n\n// 主函数\nfunction __main__() {\n  let config: TypingConfig = {\n    el: document.getElementById(\"typing\"),\n    text: C.content.trim()\n  };\n  let typing = new Typing(config);\n}\n\nwindow.onload = function() {\n  __main__();\n};\n"]}